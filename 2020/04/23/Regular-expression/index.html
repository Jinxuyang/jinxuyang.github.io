<!DOCTYPE html><html><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1"><link rel="icon" href="/favicon.png"><link rel="alternate" type="application/rss+xml" title="Verge's Blog" href="https://jysperm.me/atom.xml"><link rel="stylesheet" href="/styles.css"><title>正则表达式 | Verge's Blog</title><meta name="generator" content="Hexo 4.2.1"></head><body><div class="container"><div class="columns page-header"><h1>Verge's Blog</h1></div><div class="columns"><div class="navigation"><nav class="menus-main"><a href="/" class="favicon"><img alt="Verge's Blog" src="/favicon.png"></a><a href="/">Home</a></nav><nav class="right menus-right"><a href="/atom.xml">RSS</a><a target="_blank" href="hexo-theme-simpleblock">fork on Github</a></nav></div></div><div class="columns"><div class="block-body column three-fourths"><div class="article-widget"><a href="https://github.com/jysperm/hexo-theme-simpleblock" target="_blank" rel="noopener">与精子同款的博客主题 simpleblock 现已发布！</a></div><article><header><small class="right"><a target="_blank" href="null_posts%2FRegular-expression.md">查看源代码</a></small><h1>正则表达式</h1></header><div class="article-meta clearfix"><time class="left">2020-04-23</time><ul class="tags left"></ul><ul class="tags right"></ul></div><div class="markdown-body">
[TOC]

<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> string = <span class="string">'a1b2c3'</span>;</span><br><span class="line">string = string.replace(<span class="regexp">/[abc]/g</span>, <span class="string">'X'</span>);</span><br><span class="line"><span class="built_in">console</span>.log(string);</span><br></pre></td></tr></table></figure>



在JavaScript中创建一个正则表达式对象

<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> a = <span class="keyword">new</span> <span class="built_in">RegExp</span>();</span><br><span class="line"><span class="keyword">var</span> b = <span class="regexp">/表达式/</span>属性(g/i/m)</span><br></pre></td></tr></table></figure>

正则表达式由两种基本字符类型组成

- 原义文本字符

  - 代表要查找文本的原本意思的字符

- 元字符

  - 在正则表达式中有特殊含义的非字母字符

    <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">*+?$^.|\()[]&#123;&#125;</span><br></pre></td></tr></table></figure>



### 字符类

- 一般情况下正则表达式一个字符对应字符串一个字符

- 要匹配某类字符使用`[]`构建一个类
  - 类指符合某些特征的对象
  - `[abc]`意思就是把abc归为一类，匹配这类字符
  - `[^abc]`就是匹配出除abc以外的字符

### 范围类

- 可以使用`[a-z]`表示匹配a到z的任意字符
- `[a-zA-Z]`表示匹配a到z和A到Z的任意字符

### 预定义类

| 字符 | 等价类          | 含义                           |
| ---- | --------------- | ------------------------------ |
| .    | [^\r\n]         | 除了回车、换行符之外的其他字符 |
| \d   | [0-9]           | 数字字符                       |
| \D   | [^0-9]          | 非数字字符                     |
| \s   | [\t\n\x0B\f\r]  | 空白符                         |
| \S   | [^\t\n\x0B\f\r] | 非空白符                       |
| \w   | [a-zA-Z_0-9]    | 单词字符(字母、数字、下划线)   |
| \W   | [^a-zA-Z_0-9]   | 非单词字符                     |

### 边界

- `\b`单词边界,`\B`非单词边界
- `^`表示以...开始，`$`表示以...结束

### 量词

| 字符  | 含义            |
| ----- | --------------- |
| ?     | 0或1 次         |
| +     | ≥1 次           |
| *     | ≥0 次（任意次） |
| {n}   | n 次            |
| {n,m} | n到m 次         |
| {n,}  | ≥n 次           |

#### 贪婪模式

尽可能多的匹配

例如有一个字符串12345678

`\d{3,6}`这样进行匹配的话结果是123456，并非123或1234或....

#### 非贪婪模式

尽量少的匹配，一旦匹配成功就不再继续尝试

`\d{3,6}`结果是123，456

**JS默认使用贪婪模式，想使用非贪婪模式在量词后加上`?`即可**

### 分组

使用`()`进行分组

假如你想匹配一个小写字母加数字连续出现3次就可以这样写`([a-z]\d){3}`,而这样是不行的`[a-z]\d{3}`这样结果是匹配一个字母加三个数字

#### 或

`|`表示或

假如想匹配123345和124445就可以这样写`12(33|44)45`

感觉功能上和`[]`有**一点点**重叠

#### 反向引用

假如你想把2020-4-24变为24/4/2020就可以这样写`(\d{4})-(\d{2}|\d{1})-(\d{2}|\d{1})`

然后使用`$1$2$3`捕获分组写成`$3/$2/$1`

#### 忽略分组

假如你不想捕获某个分组就可以

这样`(\d{4})-(\d{2}|\d{1})-(?:\d{2}|\d{1})`这样就匹配不到日期了,$3就是没内容的

### 前瞻&后顾

文本头叫前文本尾部叫后

前瞻就是在正则表达式匹配带规则时，向前检查是否符合断言，后顾与之相反

**JS不支持后顾**

既要符合exp正则，又要满足断言要求

**正向/肯定 匹配**：符合特定断言
**负向/否定 匹配**：不符合特定断言

| 名称     | 正则写法      | 含义                            |
| -------- | ------------- | ------------------------------- |
| 正向前瞻 | exp(?=assert) | 符合exp正则，且符合设置的断言   |
| 负向前瞻 | exp(?!assert) | 符合exp正则，且不符合设置的断言 |

**断言部分只作为约束条件而存在，并不会参与字符本身的匹配和替换，匹配字符的是exp正则部分**

假如你想匹配一个字母后加一个数字，但是只替换字母就可以

这样`a1aaa3`一个字符串`[a-z](?=\d)`

### RegExp对象属性

| 名称       | 含义                                                         |
| ---------- | ------------------------------------------------------------ |
| global     | `g`：全文搜索，默认false                                     |
| ignoreCase | `i`：大小写敏感，默认false                                   |
| multiline  | `m`：多行搜索，默认false                                     |
| lastIndex  | 下次匹配的起始位置 该属性只有设置标志`g`才能使用，实现遍历检索匹配 |
| source     | 正则的文本字符串（正则主体）                                 |

gim这三个对象都是只读的

### RegExp对象方法

#### test()方法

<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">reg1.test(字符串)</span><br></pre></td></tr></table></figure>

返回true或false，测试字符串参数中是否存在所匹配正则的字符串

非全局调用

默认从字符串第一个字符出发，找到第一个符合条件的子字符串就停止

全局调用

如果reg1标志g的话，lastIndex就会起作用，可以通过不断调用reg1.test()对字符串进行遍历，找出所有符合条件的子字符串

每调用一次reg1.test()就会使lastIndex移动到上一次找出的字符串的最后一个字符的下一个字符上，当找不到符合条件的子字符串时，会将lastIndex重置为0

![](https://upload-images.jianshu.io/upload_images/4866277-b79894ead9358586.png?imageMogr2/auto-orient/strip|imageView2/2/w/553/format/webp)

#### exec()方法

<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">reg1.exec(字符串);</span><br></pre></td></tr></table></figure>

全局调用

返回一个数组，包含额外的属性 `index` 和 `input`，找不到返回null

<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> re = <span class="regexp">/quick\s(brown).+?(jumps)/ig</span>;</span><br><span class="line"><span class="keyword">var</span> result = re.exec(<span class="string">'The Quick Brown Fox Jumps Over The Lazy Dog'</span>);</span><br></pre></td></tr></table></figure>

| 属性/索引         |描述                                | 例子                                                |
| ---------------- | ------------------  ------------- | ------------------------------------------------- |
|`[0]`             |匹配的全部字符串                      |`Quick Brown Fox Jumps`                             |
| `[1], ...[*n* ]` |括号中的分组捕获                      |`[1] = Brown[2] = Jumps`                           |
|`index`           |匹配到的字符位于原始字符串的基于0的索引值 | `4`                                                |
| `input`          |原始字符串                           | `The Quick Brown Fox Jumps Over The Lazy Dog` |

非全局调用

与test()方法类似

</div></article></div><div class="block-sidebar column one-fourth"><div class="widget text-content"><p>Simple Block 是一个基于线框设计的简单的 Hexo 主题，拆分自 <a href="https://jysperm.me" target="_blank" rel="noopener">精子的博客</a>。
支持使用 Jade 或 Markdown 来向边栏添加小部件，或向正文前添加横幅。</p>
<p>技术栈：</p>
<ul>
<li>Jade - 页面模板</li>
<li>Less/Sass - 页面样式</li>
<li>Bower - 前端包管理器</li>
<li>CoffeeScript - Hexo 拓展脚本</li>
<li>Gulp - 编译工具</li>
</ul>
</div><div class="widget tags"></div><div class="widget archives"><ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/07/">七月 2020</a><span class="archive-list-count">2</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/06/">六月 2020</a><span class="archive-list-count">3</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/05/">五月 2020</a><span class="archive-list-count">5</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/04/">四月 2020</a><span class="archive-list-count">5</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/03/">三月 2020</a><span class="archive-list-count">10</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/02/">二月 2020</a><span class="archive-list-count">3</span></li></ul></div><div class="widget text-content"><p>该博客使用基于 &nbsp;<a href="http://hexo.io" target="_blank" rel="noopener">Hexo</a>&nbsp; 的 &nbsp;<a href="https://github.com/jysperm/hexo-theme-simpleblock" target="_blank" rel="noopener">simpleblock</a>&nbsp; 主题。博客内容使用 &nbsp;<a href="http://creativecommons.org/licenses/by-nc-sa/3.0/cn" target="_blank" rel="noopener">CC BY-NC-SA 3.0</a>&nbsp; 授权发布。最后生成于 2020-08-05.</p></div></div></div></div></body></html>