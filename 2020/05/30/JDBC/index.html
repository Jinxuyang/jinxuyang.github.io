<!DOCTYPE html><html><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1"><link rel="icon" href="/favicon.png"><link rel="alternate" type="application/rss+xml" title="Verge's Blog" href="https://jysperm.me/atom.xml"><link rel="stylesheet" href="/styles.css"><title>JDBC学习笔记 | Verge's Blog</title><meta name="generator" content="Hexo 4.2.1"></head><body><div class="container"><div class="columns page-header"><h1>Verge's Blog</h1></div><div class="columns"><div class="navigation"><nav class="menus-main"><a href="/" class="favicon"><img alt="Verge's Blog" src="/favicon.png"></a><a href="/">Home</a></nav><nav class="right menus-right"><a href="/atom.xml">RSS</a><a target="_blank" href="hexo-theme-simpleblock">fork on Github</a></nav></div></div><div class="columns"><div class="block-body column three-fourths"><div class="article-widget"><a href="https://github.com/jysperm/hexo-theme-simpleblock" target="_blank" rel="noopener">与精子同款的博客主题 simpleblock 现已发布！</a></div><article><header><small class="right"><a target="_blank" href="null_posts%2FJDBC.md">查看源代码</a></small><h1>JDBC学习笔记</h1></header><div class="article-meta clearfix"><time class="left">2020-05-30</time><ul class="tags left"></ul><ul class="tags right"></ul></div><div class="markdown-body">
### JDBC是啥

JDBC(Java DataBase connectivity)(Java 数据库连接)

由SUN公司定义的一系列操作关系型数据库的接口，后由数据库厂商对接口进行实现，提供数据库驱动jar包

##  使用

### 导入jar包

 

### 加载驱动

<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Class.forName(<span class="string">"com.mysql.jdbc.Driver"</span>);<span class="comment">//把com.mysql.jdbc.Driver这个字节码文件加载到内存里</span></span><br></pre></td></tr></table></figure>

### 连接数据库

`host = jdbc:mysql://host /db`

<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Connection conn = DriverManager.getConnection(host,username,passwd);</span><br></pre></td></tr></table></figure>

连接时发现报错

> The server time zone value '�й���׼ʱ��' is unrecognized or represents more than one time zone. You must configure either the server or JDBC driver (via the serverTimezone configuration property) to use a more specifc time zone value if you want to utilize time zone support.

解决方法

host后加上`?serverTimezone=UTC`

## 对象详解

1. DriverManage驱动管理
   - 注册驱动
     - MySQL5以后可以自动注册
   - 获取数据库连接
     - static getConnection(String url,String user,String password)
     - url = jdbc:mysql://ip地址:端口号/数据库名
2. Connection数据库连接对象
   1. 获取执行sql语句的对象
      -  Statement CreateStatement(String sql)
      - Prestatement prepareStatement(String sql)
   2. 管理事务
3. Statement执行sql语句
   1. 执行sql
      1. int executeUpdate(String sql)：执行DML(insert,update,delete)，DDL(create,alter,drop)
         - 返回值是操作后影响的行数
         - 可以用来判断成功与否
      2. ResultSet executeQuery(String sql):执行DQL(select)
4. ResultSet查询结果的封装
   - boolean next()游标向下移动一行(默认指向表头)，判断是否有数据
   - getXxx("列名/列的编号，从1开始")获取数据Xxx代表类型
5. PreparedStatement
   1. SQL注入问题:在拼接sql‘语句时，有一些特殊的词参与拼接会造成安全问题
   2. 使用PreparedStatem对象解决问题
      1. 定义sql语句时使用`?`作为占位符，替换参数
      2. 使用setXxx(？的编号从1开始，参数的值)
      3. 执行sql语句时不再需要传参

## Spring JDBC

Spring框架提供的JDBC简单封装

提供一个JDBCTemplate

### 使用

1. 导入jar包
2. 创建JdbcTemplate，依赖于DataSource
   1. JdbcTemplate template = new JdbcTemplate
3. 调用JdbcTemplate的方法完成CRUD操作
   1. update()增删改
   2. queryForMap()将查询结果封装为map集合
   3. queryForList()将查询结果封装为list集合
   4. query()查询结果，将查询结果封装为JavaBean对象
   5. queryForObject()将查询结果封装为对象

</div></article></div><div class="block-sidebar column one-fourth"><div class="widget text-content"><p>Simple Block 是一个基于线框设计的简单的 Hexo 主题，拆分自 <a href="https://jysperm.me" target="_blank" rel="noopener">精子的博客</a>。
支持使用 Jade 或 Markdown 来向边栏添加小部件，或向正文前添加横幅。</p>
<p>技术栈：</p>
<ul>
<li>Jade - 页面模板</li>
<li>Less/Sass - 页面样式</li>
<li>Bower - 前端包管理器</li>
<li>CoffeeScript - Hexo 拓展脚本</li>
<li>Gulp - 编译工具</li>
</ul>
</div><div class="widget tags"></div><div class="widget archives"><ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/07/">七月 2020</a><span class="archive-list-count">2</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/06/">六月 2020</a><span class="archive-list-count">3</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/05/">五月 2020</a><span class="archive-list-count">5</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/04/">四月 2020</a><span class="archive-list-count">5</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/03/">三月 2020</a><span class="archive-list-count">10</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/02/">二月 2020</a><span class="archive-list-count">3</span></li></ul></div><div class="widget text-content"><p>该博客使用基于 &nbsp;<a href="http://hexo.io" target="_blank" rel="noopener">Hexo</a>&nbsp; 的 &nbsp;<a href="https://github.com/jysperm/hexo-theme-simpleblock" target="_blank" rel="noopener">simpleblock</a>&nbsp; 主题。博客内容使用 &nbsp;<a href="http://creativecommons.org/licenses/by-nc-sa/3.0/cn" target="_blank" rel="noopener">CC BY-NC-SA 3.0</a>&nbsp; 授权发布。最后生成于 2020-08-05.</p></div></div></div></div></body></html>