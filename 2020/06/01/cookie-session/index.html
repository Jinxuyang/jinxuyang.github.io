<!DOCTYPE html><html><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1"><link rel="icon" href="/favicon.png"><link rel="alternate" type="application/rss+xml" title="Verge's Blog" href="https://jysperm.me/atom.xml"><link rel="stylesheet" href="/styles.css"><title>cookie&amp;session | Verge's Blog</title><meta name="generator" content="Hexo 4.2.1"></head><body><div class="container"><div class="columns page-header"><h1>Verge's Blog</h1></div><div class="columns"><div class="navigation"><nav class="menus-main"><a href="/" class="favicon"><img alt="Verge's Blog" src="/favicon.png"></a><a href="/">Home</a></nav><nav class="right menus-right"><a href="/atom.xml">RSS</a><a target="_blank" href="hexo-theme-simpleblock">fork on Github</a></nav></div></div><div class="columns"><div class="block-body column three-fourths"><div class="article-widget"><a href="https://github.com/jysperm/hexo-theme-simpleblock" target="_blank" rel="noopener">与精子同款的博客主题 simpleblock 现已发布！</a></div><article><header><small class="right"><a target="_blank" href="null_posts%2Fcookie-session.md">查看源代码</a></small><h1>cookie&amp;session</h1></header><div class="article-meta clearfix"><time class="left">2020-06-01</time><ul class="tags left"></ul><ul class="tags right"></ul></div><div class="markdown-body">
## 会话

### 什么是会话

一次会话中包含多次请求和响应

一次会话：浏览器第一次给服务器发送请求，会话建立，指导一方断开为止

### 有什么用

在一次会话范围内的多次请求共享数据

### 怎么实现 

1. 客户端会话技术（数据存放在客户端）：Cookie
2. 服务端会话技术（数据存放在服务端）：Session

## Cookie

### 如何使用

1. 创建Cookie对象】
   1. new Cookie(String name,String value)
2. 发送Ciookie对象
   1. response.addCookie(Cookie cookie)
3. 获取Cookie
   1. Cookie[] request.getCookies()



### 原理

- 基于请求头Cookie和响应头Set-Cookie实现

### 细节

1. 一次可以发送多个Cookie（创建多个Cookie对象，多次调用AddCookie）
2. Cookie可以保存多长时间
   1. 默认情况下，浏览器关闭后Cookie销毁
   2.  持久化存储
      1. setMaxAge(int seconds)
         1. 正数，将Cookie数据写道硬盘中，设置Cookie存货时间，单位s
         2. 负数，默认值，结束会话删除
         3. 0，删除Cookie信息

3. Cookie的获取范围
   1. 

### 特点和作用

1. cookie储存在客户端
2. 浏览器对于单个Cookie大小有限制4kb，对一个域名下总cookie数量有限制20个



1. 

## Session

### 使用

1. 获取HttpSession对象(域对象)
   1. request.getSession()

2. 方法
   1. Object getAttribute(String name)
   2. void setAttribute(String name,Object value)
   3. void removeAttribute(String name)

### 原理

Session的实现依赖于Cookie

首次使用时服务器向浏览器发送一个Cookie包含一个JSESSIONID，再次访问时，浏览器向服务器发送JSESSIONID，服务器通过这个ID，确保两次访问使用的是同一个HttpSeesion对象

### 细节

1. 客户端关闭服务器不关闭，两次访问不是同一个Session
   1. 若需要相同可以设置Cookie的存活时间
2. 服务器关闭客户端不关闭，两次访问不是同一个Session
   1. session钝化：
   2. session活化
3. Session失效时间
   1. 服务器关闭
   2. 调用一个自杀方法
   3. 默认失效时间30min



### 特点

1. 存储一次会话的数据，存在服务端
2. 可以存储任意类型数据，任意大小
3. 比Cookie安全</div></article></div><div class="block-sidebar column one-fourth"><div class="widget text-content"><p>Simple Block 是一个基于线框设计的简单的 Hexo 主题，拆分自 <a href="https://jysperm.me" target="_blank" rel="noopener">精子的博客</a>。
支持使用 Jade 或 Markdown 来向边栏添加小部件，或向正文前添加横幅。</p>
<p>技术栈：</p>
<ul>
<li>Jade - 页面模板</li>
<li>Less/Sass - 页面样式</li>
<li>Bower - 前端包管理器</li>
<li>CoffeeScript - Hexo 拓展脚本</li>
<li>Gulp - 编译工具</li>
</ul>
</div><div class="widget tags"></div><div class="widget archives"><ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/07/">七月 2020</a><span class="archive-list-count">2</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/06/">六月 2020</a><span class="archive-list-count">3</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/05/">五月 2020</a><span class="archive-list-count">5</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/04/">四月 2020</a><span class="archive-list-count">5</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/03/">三月 2020</a><span class="archive-list-count">10</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/02/">二月 2020</a><span class="archive-list-count">3</span></li></ul></div><div class="widget text-content"><p>该博客使用基于 &nbsp;<a href="http://hexo.io" target="_blank" rel="noopener">Hexo</a>&nbsp; 的 &nbsp;<a href="https://github.com/jysperm/hexo-theme-simpleblock" target="_blank" rel="noopener">simpleblock</a>&nbsp; 主题。博客内容使用 &nbsp;<a href="http://creativecommons.org/licenses/by-nc-sa/3.0/cn" target="_blank" rel="noopener">CC BY-NC-SA 3.0</a>&nbsp; 授权发布。最后生成于 2020-08-05.</p></div></div></div></div></body></html>